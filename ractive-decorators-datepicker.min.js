!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.datepickerDecorator=t()}(this,function(){"use strict";var e=function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=e.config,o=e.types,i=$.fn.datepicker.DPGlobal,f=[],u=$(t),d=!1,c=o.hasOwnProperty(a)?o[a]:o.default,p=r.internalFormat||c.format||$.fn.datepicker.defaults.format,s=c.language||$.fn.datepicker.defaults.language,l=$('<div class="dateinput-original" />').insertBefore(u),h=function(e){var t=$(e),n=Ractive.getNodeInfo(e).getBindingPath(),a=t.clone();a.removeAttr("id").removeAttr("name").insertAfter(t),t.attr("type","hidden").detach().appendTo(l),f.push({node:e,$input:a,keypath:n})};return"INPUT"==t.tagName?(h(t),u=f[0].$input):u.hasClass("input-daterange")&&u.children('input[type="text"]').each(function(e,t){h(t)}),0===f.length?{teardown:function(){}}:(u.datepicker(c).on("changeDate",function(){f.forEach(function(e){if(e.keypath&&!d){var t=e.$input.datepicker("getDate");d=!0,e.node.value=i.formatDate(t||null,p,s),n.updateModel(e.keypath),d=!1}})}),f.forEach(function(e){e.keypath&&(e.observer=n.observe(e.keypath,function(t){if(!d){var n=i.parseDate(t,p,s);n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),d=!0,e.$input.datepicker("setDate",n||""),d=!1}}))}),{teardown:function(){u.datepicker("remove"),f.forEach(function(e){e.observer&&e.observer.cancel(),$(e.node).detach().insertBefore(e.$input).attr("type","text"),e.$input.remove()}),l.remove()}})};return e.config={internalFormat:null},e.types={default:{}},e});
