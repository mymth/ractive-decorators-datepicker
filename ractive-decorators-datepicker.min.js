!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).datepickerDecorator=t(e.$)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=t(e);const n=function(e,t="default"){const r=n.internalFormat,d=n.types,i=a.default.fn.datepicker.DPGlobal,o=[];let u=a.default(e),f=!1;const l=d.hasOwnProperty(t)?d[t]:d.default,s=r||l.format||a.default.fn.datepicker.defaults.format,p=l.language||a.default.fn.datepicker.defaults.language,c=a.default('<div class="dateinput-original" />').insertBefore(u),h=e=>{const t=a.default(e),n=this.getContext(e).getBindingPath(),r=t.clone(),d=t.attr("id");d&&r.attr("id",`${d}-datepicker`),r.removeAttr("name").addClass("dateinput").insertAfter(t),t.attr("type","hidden").detach().appendTo(c),o.push({node:e,$input:r,keypath:n})};return"INPUT"==e.tagName?(h(e),u=o[0].$input):u.hasClass("input-daterange")&&u.children('input[type="text"]').each(((e,t)=>{h(t)})),0===o.length?{teardown(){}}:(u.datepicker(l).on("changeDate",(()=>{o.forEach((e=>{if(!e.keypath||f)return;const t=e.$input.datepicker("getUTCDate");f=!0,this.set(e.keypath,i.formatDate(t,s,p)||null),a.default(e.node).trigger("change"),f=!1}))})),o.forEach((e=>{e.keypath&&(e.obsHandle=this.observe(e.keypath,(t=>{if(f)return;let n=i.parseDate(t,s,p);n?n.setMinutes(n.getMinutes()+n.getTimezoneOffset()):n="",f=!0,e.$input.datepicker("setDate",n),a.default(e.node).val(t).trigger("change"),f=!1})))})),{teardown(){u.datepicker("destroy"),o.forEach((e=>{e.obsHandle&&e.obsHandle.cancel(),a.default(e.node).detach().insertBefore(e.$input).attr("type","text"),e.$input.remove()})),c.remove()}})};return n.internalFormat=null,n.types={default:{}},n}));
