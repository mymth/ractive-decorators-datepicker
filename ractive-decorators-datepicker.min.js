!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.datepickerDecorator=t()}(this,function(){"use strict";var e=function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=e.config,i=e.types,o=$.fn.datepicker.DPGlobal,f=[],u=$(t),c=!1,d=i.hasOwnProperty(a)?i[a]:i.default,p=r.internalFormat||d.format||$.fn.datepicker.defaults.format,s=d.language||$.fn.datepicker.defaults.language,l=$('<div class="dateinput-original" />').insertBefore(u),h=function(e){var t=$(e),n=Ractive.getNodeInfo(e).getBindingPath(),a=t.clone();a.removeAttr("id").removeAttr("name").insertAfter(t),t.attr("type","hidden").detach().appendTo(l),f.push({node:e,$input:a,keypath:n})};return"INPUT"==t.tagName?(h(t),u=f[0].$input):u.hasClass("input-daterange")&&u.children('input[type="text"]').each(function(e,t){h(t)}),0===f.length?{teardown:function(){}}:(u.datepicker(d).on("changeDate",function(){f.forEach(function(e){if(e.keypath&&!c){var t=e.$input.datepicker("getDate");c=!0,n.set(e.keypath,o.formatDate(t,p,s)||null),c=!1}})}),f.forEach(function(e){e.keypath&&(e.observer=n.observe(e.keypath,function(t){if(!c){var n=o.parseDate(t,p,s);n?n.setMinutes(n.getMinutes()+n.getTimezoneOffset()):n="",c=!0,e.$input.datepicker("setDate",n),c=!1}}))}),{teardown:function(){u.datepicker("remove"),f.forEach(function(e){e.observer&&e.observer.cancel(),$(e.node).detach().insertBefore(e.$input).attr("type","text"),e.$input.remove()}),l.remove()}})};return e.config={internalFormat:null},e.types={default:{}},e});
