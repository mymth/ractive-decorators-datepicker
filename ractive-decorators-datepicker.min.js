!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["ractive","jquery"],b);else if("undefined"!=typeof module&&module.exports&&"function"==typeof require)b(require("ractive","jquery"));else{if(!a.Ractive||!a.jQuery)throw new Error("Could not find Ractive! It must be loaded before the ractive-decorators-datepicker plugin");b(a.Ractive,a.jQuery)}}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=b.fn.datepicker.DPGlobal,d=function(a,e){function f(a){var b;return a&&""!==a?(b=a.match(/^\d+(-\d+){2}$/)?new Date(a.replace(/-/g,"/")):c.parseDate(a,i,l),isNaN(b)?null:b):null}function g(a){var c,d=b(a);c=d.clone(),c.removeAttr("id").removeAttr("name").insertAfter(d),d.attr("type","hidden").detach().appendTo(p),q.push({node:a,$input:c,keypath:a._ractive.binding?a._ractive.binding.keypath:!1,setting:!1})}var h,i,j,k,l,m=a._ractive.root,n=d.types,o=b(a),p=b('<div class="dateinput-original" />').insertBefore(o),q=[];return this.defaults={internalFormat:"yyyy-mm-dd"},h=b.extend(this.defaults,d.config),i=h.internalFormat,n.hasOwnProperty("default")||(n.default={}),j=e&&n.hasOwnProperty(e)?n[e]:n["default"],"function"==typeof j&&(j=j.call(this,a)),k=j.format||b.fn.datepicker.defaults.format,l=j.language||b.fn.datepicker.defaults.language,"INPUT"==a.tagName?(g(a),o=q[0].$input):o.is(".input-daterange")&&o.children('input[type="text"]').each(function(a,b){g(b)}),0===q.length?void console.warn("Not supported configuration:",a):(o.datepicker(j).on("changeDate",function(){for(var a in q){var b,d=q[a];d.setting||(d.setting=!0,b=isNaN(b=d.$input.datepicker("getDate"))?null:b,d.node.value=c.formatDate(b,i,l),d.keypath&&m.updateModel(d.keypath),d.setting=!1)}}),b.map(q,function(a){a.keypath&&(a.observer=m.observe(a.keypath,function(b){a.setting||(a.setting=!0,a.$input.datepicker("setDate",f(b)),a.setting=!1)}))}),{teardown:function(){o.datepicker("remove"),b.map(q,function(a){a.observer&&a.observer.cancel(),b(a.node).detach().insertBefore(a.$input).attr("type","text"),a.$input.remove()}),p.remove()}})};d.config={},d.types={},a.decorators.datepicker=d});