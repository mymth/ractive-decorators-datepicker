!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("ractive"),require("jquery")):"function"==typeof define&&define.amd?define(["ractive","jquery"],t):e.datepickerDecorator=t(e.Ractive,e.$)}(this,function(e,t){"use strict";e="default"in e?e.default:e,t="default"in t?t.default:t;var n=function n(a){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",o=n.internalFormat,u=n.types,f=t.fn.datepicker.DPGlobal,d=[],c=t(a),p=!1,s=u.hasOwnProperty(i)?u[i]:u.default,l=o||s.format||t.fn.datepicker.defaults.format,h=s.language||t.fn.datepicker.defaults.language,v=t('<div class="dateinput-original" />').insertBefore(c),g=function(n){var a=t(n),r=e.getNodeInfo(n).getBindingPath(),i=a.clone();i.removeAttr("id").removeAttr("name").insertAfter(a),a.attr("type","hidden").detach().appendTo(v),d.push({node:n,$input:i,keypath:r})};return"INPUT"==a.tagName?(g(a),c=d[0].$input):c.hasClass("input-daterange")&&c.children('input[type="text"]').each(function(e,t){g(t)}),0===d.length?{teardown:function(){}}:(c.datepicker(s).on("changeDate",function(){d.forEach(function(e){if(e.keypath&&!p){var t=e.$input.datepicker("getDate");p=!0,r.set(e.keypath,f.formatDate(t,l,h)||null),p=!1}})}),d.forEach(function(e){e.keypath&&(e.observer=r.observe(e.keypath,function(t){if(!p){var n=f.parseDate(t,l,h);n?n.setMinutes(n.getMinutes()+n.getTimezoneOffset()):n="",p=!0,e.$input.datepicker("setDate",n),p=!1}}))}),{teardown:function(){c.datepicker("remove"),d.forEach(function(e){e.observer&&e.observer.cancel(),t(e.node).detach().insertBefore(e.$input).attr("type","text"),e.$input.remove()}),v.remove()}})};return n.internalFormat=null,n.types={default:{}},n});
