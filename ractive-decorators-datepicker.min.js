!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e.datepickerDecorator=t(e.$)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=function t(n){var a=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=t.internalFormat,o=t.types,d=e.fn.datepicker.DPGlobal,u=[],f=e(n),p=!1,c=o.hasOwnProperty(r)?o[r]:o.default,s=i||c.format||e.fn.datepicker.defaults.format,l=c.language||e.fn.datepicker.defaults.language,h=e('<div class="dateinput-original" />').insertBefore(f),g=function(t){var n=e(t),r=a.getContext(t).getBindingPath(),i=n.clone(),o=n.attr("id");o&&i.attr("id",o+"-datepicker"),i.removeAttr("name").addClass("dateinput").insertAfter(n),n.attr("type","hidden").detach().appendTo(h),u.push({node:t,$input:i,keypath:r})};return"INPUT"==n.tagName?(g(n),f=u[0].$input):f.hasClass("input-daterange")&&f.children('input[type="text"]').each(function(e,t){g(t)}),0===u.length?{teardown:function(){}}:(f.datepicker(c).on("changeDate",function(){u.forEach(function(t){if(t.keypath&&!p){var n=t.$input.datepicker("getUTCDate");p=!0,a.set(t.keypath,d.formatDate(n,s,l)||null),e(t.node).trigger("change"),p=!1}})}),u.forEach(function(t){t.keypath&&(t.obsHandle=a.observe(t.keypath,function(n){if(!p){var a=d.parseDate(n,s,l);a?a.setMinutes(a.getMinutes()+a.getTimezoneOffset()):a="",p=!0,t.$input.datepicker("setDate",a),e(t.node).val(n).trigger("change"),p=!1}}))}),{teardown:function(){f.datepicker("destroy"),u.forEach(function(t){t.obsHandle&&t.obsHandle.cancel(),e(t.node).detach().insertBefore(t.$input).attr("type","text"),t.$input.remove()}),h.remove()}})};return t.internalFormat=null,t.types={default:{}},t});
