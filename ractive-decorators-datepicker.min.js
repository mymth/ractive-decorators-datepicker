!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e.datepickerDecorator=t(e.$)}(this,function(e){"use strict";e="default"in e?e.default:e;var t=function t(n){var a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=t.internalFormat,o=t.types,d=e.fn.datepicker.DPGlobal,u=[],f=e(n),p=!1,c=o.hasOwnProperty(i)?o[i]:o.default,s=r||c.format||e.fn.datepicker.defaults.format,l=c.language||e.fn.datepicker.defaults.language,h=e('<div class="dateinput-original" />').insertBefore(f),y=function(t){var n=e(t),i=a.getContext(t).getBindingPath(),r=n.clone(),o=n.attr("id");o&&r.attr("id",o+"-datepicker"),r.removeAttr("name").addClass("dateinput").insertAfter(n),n.attr("type","hidden").detach().appendTo(h),u.push({node:t,$input:r,keypath:i})};return"INPUT"==n.tagName?(y(n),f=u[0].$input):f.hasClass("input-daterange")&&f.children('input[type="text"]').each(function(e,t){y(t)}),0===u.length?{teardown:function(){}}:(f.datepicker(c).on("changeDate",function(){u.forEach(function(e){if(e.keypath&&!p){var t=e.$input.datepicker("getDate");p=!0,a.set(e.keypath,d.formatDate(t,s,l)||null),p=!1}})}),u.forEach(function(e){e.keypath&&(e.obsHandle=a.observe(e.keypath,function(t){if(!p){var n=d.parseDate(t,s,l);n?n.setMinutes(n.getMinutes()+n.getTimezoneOffset()):n="",p=!0,e.$input.datepicker("setDate",n),p=!1}}))}),{teardown:function(){f.datepicker("destroy"),u.forEach(function(t){t.obsHandle&&t.obsHandle.cancel(),e(t.node).detach().insertBefore(t.$input).attr("type","text"),t.$input.remove()}),h.remove()}})};return t.internalFormat=null,t.types={default:{}},t});
